{% extends 'contributions/base.html' %}

{% block title %}{{ group.name }} Details{% endblock %}

{% block content %}
<h1>{{ group.name }}</h1>
<p>Weekly Contribution: {{ group.weekly_contribution }} Ksh</p>

<h2>Members</h2>
<ul>
    {% for member in group.members.all %}
        <li>{{ member.username }}</li>
    {% endfor %}
</ul>

{% if user == group.admin %}
    <h2>Manage Members</h2>
    <form method="post" action="{% url 'group_detail' group.id %}">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" name="manage_member">Submit</button>
    </form>

    <h2>Generate Join Code</h2>
    <form method="post" action="{% url 'group_detail' group.id %}">
        {% csrf_token %}
        <button type="submit" name="generate_code">Generate Code</button>
    </form>

    {% if group.join_code %}
        <p>Join Code: <strong>{{ group.join_code }}</strong></p>
    {% endif %}
{% endif %}

<a href="{% url 'dashboard' %}">Back to Dashboard</a>
{% endblock %}
